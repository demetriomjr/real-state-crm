## 1. üîå Servi√ßos de Terceiros (MVP)
Objetivo: listar e padronizar os servi√ßos externos consumidos pelo SaaS, seus usos no P0 e notas de implementa√ß√£o.

---

## 2. WhatsApp Business Cloud API (Meta)
- Prop√≥sito: mensageria com clientes/prospects diretamente no WhatsApp.
- Uso no P0:
  - Enviar/receber mensagens via endpoints HTTP e webhooks.
  - Registrar `providerMessageId` por mensagem para deduplica√ß√£o e rastreio.
  - Exibir a timeline de mensagens por pessoa no CRM.
- Notas:
  - Integra√ß√£o por organiza√ß√£o (tenant); credenciais configuradas pelo administrador do tenant.
  - Webhook de entrada (mensagens recebidas) por tenant; eventos isolados por organiza√ß√£o.
  - Observabilidade b√°sica: logs estruturados e correla√ß√£o por `tenantId` e `personId`.

---

## 3. Google Calendar API
- Prop√≥sito: cria√ß√£o/atualiza√ß√£o de eventos de atendimento/visita.
- Uso no P0:
  - Criar/atualizar evento e armazenar `calendarEventId` no Agendamento.
  - Fluxos exigem `startsAt < endsAt`; retorno de link/hor√°rio para exibi√ß√£o na UI.
  - Autoriza√ß√£o OAuth 2.0 por usu√°rio para operar no calend√°rio do pr√≥prio usu√°rio.
- Notas:
  - Integra√ß√£o por organiza√ß√£o; cada usu√°rio autoriza seu acesso ao Calendar.
  - Atualiza√ß√µes de agendamento devem refletir no Calendar quando a integra√ß√£o estiver ativa.

---

## 4. Servi√ßo de IA (LLM) ‚Äî provedor plug√°vel
- Prop√≥sito: analisar o hist√≥rico de chat e gerar "Resumo" e "Pr√≥xima a√ß√£o".
- Uso no P0:
  - Interface HTTP abstrata: entrada = hist√≥rico de mensagens (contexto m√≠nimo necess√°rio); sa√≠da = resumo curto e sugest√£o de pr√≥xima a√ß√£o.
  - Meta de lat√™ncia: at√© ~3s; quando indispon√≠vel, exibir fallback (mensagem/estado de carregamento) na UI.
- Notas:
  - Provedor plug√°vel (a definir). Manter contrato est√°vel no backend.
  - Evitar PII em logs; manter correla√ß√£o por `tenantId`/`personId` para diagn√≥stico.

---

## 5. Webhooks e seguran√ßa (padr√µes)
- WhatsApp: endpoint p√∫blico para mensagens recebidas; validar requisi√ß√µes e assinatura/valida√ß√£o exigidas pelo provedor.
- Multi-tenant: isolar rota/escopo por organiza√ß√£o; nunca misturar dados entre tenants.
- Idempot√™ncia: usar `providerMessageId` para evitar processamento duplicado.
- Observabilidade: logs estruturados; m√©tricas b√°sicas por provedor.

---

## 6. Gest√£o de credenciais (por tenant)
- Armazenar chaves/segredos com seguran√ßa; acesso restrito por organiza√ß√£o.
- Fluxos de configura√ß√£o pelo Administrador do Sistema (ver [1.3.Stakeholders.md](1.3.Stakeholders.md)).

---

## 7. Refer√™ncias oficiais
- WhatsApp Business Cloud API (Meta): https://developers.facebook.com/docs/whatsapp/cloud-api/
- Google Calendar API: https://developers.google.com/calendar/api
- IA (provedor plug√°vel): TBD ‚Äî interface HTTP definida internamente

---

[‚Üê Voltar ao Sum√°rio](0.0.SUMMARY.md)
